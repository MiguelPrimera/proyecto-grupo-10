<style>
  .contenedor-principal {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  .contenido {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
  }

  .panel-derecho {
    width: 300px;
    background-color: #f5f5f5;
    border-left: 1px solid #ccc;
    padding: 15px;
    overflow-y: auto;
  } 
  #message-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
  }

  .alert {
    padding: 12px 18px;
    margin-bottom: 10px;
    border-radius: 8px;
    font-family: sans-serif;
    font-size: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    opacity: 0.95;
    transition: opacity 0.5s ease-out;
  }

  .alert-success {
    background-color: #d4edda;
    color: #155724;
  }

  .alert-error, .alert-danger {
    background-color: #f8d7da;
    color: #721c24;
  }

  .alert-warning {
    background-color: #fff3cd;
    color: #856404;
  }

  .alert-info {
    background-color: #d1ecf1;
    color: #0c5460;
  }

</style>

<h1>Grupos de Estudio</h1>
{% if messages %}
  <div id="message-container">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}
<div class="contenedor-principal">
  <div class="contenido">
    {% for pub in publicaciones %}
      <div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
        <h3>{{ pub.titulo }}</h3>
        <p>{{ pub.contenido }}</p>
        <p><strong>Opci√≥n:</strong> {{ pub.get_opcion_display }}</p>
        <p><strong>Cupos:</strong> {{ pub.cupos_disponibles }} / {{ pub.cupos_maximos }}</p>
        <p><strong>Creador:</strong> {{ pub.creador.username }}</p>

        {% if user.is_authenticated %}
          {% if user == pub.creador %}
            <form action="{% url 'borrar_publicacion' pub.id %}" method="GET" style="display:inline;">
              <button type="submit">üóëÔ∏è Borrar</button>
            </form>
          {% else %}
            <form action="{% url 'unirse_grupo' pub.id %}" method="POST" style="display:inline;">
              {% csrf_token %}
              <button type="submit" {% if pub.cupos_disponibles == 0 %}disabled{% endif %}>
                Unirse al grupo
              </button>
            </form>
          {% endif %}
        {% else %}
          <p>Inicia sesi√≥n para unirte o crear grupos.</p>
        {% endif %}
      </div>
    {% empty %}
      <p>No hay publicaciones disponibles.</p>
    {% endfor %}
  </div>
  <div class="panel-derecho">
    <h1>Eres miembro de:</h1>
    {% for grupo in unido %}
    <p>
      {{grupo.publicacion.titulo}}
    </p>
    {% endfor %}
  </div>
</div>
<script>
  setTimeout(() => {
    const messages = document.querySelectorAll('#message-container .alert');
    messages.forEach(msg => {
      msg.style.opacity = '0';
      setTimeout(() => msg.remove(), 500);
    });
  }, 5000);
</script>